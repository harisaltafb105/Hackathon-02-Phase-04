# Default values for todo-app.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Global configuration applied to all services
global:
  # Image pull policy: Always, IfNotPresent, Never
  imagePullPolicy: IfNotPresent
  # Common labels applied to all resources
  labels:
    app: todo
    environment: development

# Secrets - MUST be provided at deploy time via --set
# NEVER commit actual values to version control
secrets:
  # Neon PostgreSQL connection string
  # Format: postgresql://user:password@host/database?sslmode=require
  databaseUrl: "PLACEHOLDER_DATABASE_URL"
  # Better Auth shared secret for JWT signing
  # Must match between frontend and backend
  betterAuthSecret: "PLACEHOLDER_BETTER_AUTH_SECRET"
  # OpenAI API key for AI agent
  # Format: sk-xxxxxxxxxxxxxxxx
  openaiApiKey: "PLACEHOLDER_OPENAI_API_KEY"

# Frontend (Next.js) configuration
frontend:
  # Enable/disable frontend deployment
  enabled: true
  # Replica count
  replicaCount: 1
  # Docker image configuration
  image:
    repository: todo-frontend
    tag: latest
    pullPolicy: IfNotPresent
  # Service configuration
  service:
    type: NodePort
    port: 3000
    targetPort: 3000
    nodePort: 30000
  # Resource limits
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  # Health probes
  probes:
    liveness:
      path: /api/health
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readiness:
      path: /api/health
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  # Environment variables (non-sensitive)
  env:
    NODE_ENV: production
    NEXT_PUBLIC_API_URL: http://backend-svc:8000

# Backend (FastAPI) configuration
backend:
  # Enable/disable backend deployment
  enabled: true
  # Replica count
  replicaCount: 1
  # Docker image configuration
  image:
    repository: todo-backend
    tag: latest
    pullPolicy: IfNotPresent
  # Service configuration
  service:
    type: ClusterIP
    port: 8000
    targetPort: 8000
  # Resource limits
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  # Health probes
  probes:
    liveness:
      path: /health
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readiness:
      path: /health
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  # Environment variables (non-sensitive)
  env:
    PYTHONUNBUFFERED: "1"
    BETTER_AUTH_URL: http://frontend-svc:3000

# MCP Server configuration
mcpServer:
  # Enable/disable MCP server deployment
  enabled: true
  # Replica count
  replicaCount: 1
  # Docker image configuration
  image:
    repository: todo-mcp-server
    tag: latest
    pullPolicy: IfNotPresent
  # Service configuration
  service:
    type: ClusterIP
    port: 8001
    targetPort: 8001
  # Resource limits
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  # Health probes
  probes:
    liveness:
      path: /health
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readiness:
      path: /health
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  # Environment variables (non-sensitive)
  env:
    BACKEND_URL: http://backend-svc:8000

# AI Agent configuration
aiAgent:
  # Enable/disable AI agent deployment
  enabled: true
  # Replica count
  replicaCount: 1
  # Docker image configuration
  image:
    repository: todo-ai-agent
    tag: latest
    pullPolicy: IfNotPresent
  # Service configuration
  service:
    type: ClusterIP
    port: 8002
    targetPort: 8002
  # Resource limits
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  # Health probes
  probes:
    liveness:
      path: /health
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readiness:
      path: /health
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  # Environment variables (non-sensitive)
  env:
    MCP_SERVER_URL: http://mcp-server-svc:8001
    OPENAI_MODEL: gpt-4
